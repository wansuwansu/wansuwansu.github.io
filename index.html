<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOSPITAL MARKETING PRO (Personal)</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { font-family: 'Pretendard', sans-serif; background-color: #0E1117; color: #E6EDF3; }
        
        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í…€ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #161B22; }
        ::-webkit-scrollbar-thumb { background: #30363D; border-radius: 4px; }
        
        /* ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ */
        .card { background-color: #161B22; border: 1px solid #30363D; border-radius: 8px; padding: 24px; margin-bottom: 20px; }
        .input-dark { background-color: #0D1117; border: 1px solid #30363D; color: white; padding: 12px; border-radius: 6px; width: 100%; transition: 0.2s; }
        .input-dark:focus { border-color: #58A6FF; outline: none; }
        
        .btn-primary { background-color: #238636; color: white; font-weight: 600; padding: 12px; border-radius: 6px; width: 100%; transition: 0.2s; }
        .btn-primary:hover { background-color: #2EA043; }
        
        .tab-btn { flex: 1; padding: 14px; text-align: center; color: #8B949E; border-bottom: 2px solid transparent; cursor: pointer; transition: 0.2s; }
        .tab-btn.active { color: white; border-bottom-color: #58A6FF; font-weight: bold; background-color: #161B22; }
        
        .grid-btn { padding: 10px; font-size: 0.85rem; border-radius: 6px; border: 1px solid #30363D; background: #21262D; color: #C9D1D9; transition: 0.2s; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .grid-btn.active { background: #1F6FEB; color: white; border-color: #1F6FEB; }
        
        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .spinner { border: 3px solid #30363D; border-top: 3px solid #58A6FF; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; display: inline-block; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* ë“±ê¸‰ ë±ƒì§€ */
        .badge-s { background-color: #7f1d1d; color: #fecaca; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; }
        .badge-a { background-color: #1e3a8a; color: #bfdbfe; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; }
        .badge-b { background-color: #14532d; color: #bbf7d0; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; }
        .badge-c { background-color: #374151; color: #9ca3af; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================================================================
        // 1. [í•„ìˆ˜] API í‚¤ ì„¤ì • (ì—¬ê¸°ì— ë³¸ì¸ì˜ í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”)
        // ==========================================================================================
        const CONFIG = {
            KAKAO_REST_KEY: "ì—¬ê¸°ì—_ì¹´ì¹´ì˜¤_REST_API_í‚¤ë¥¼_ë„£ìœ¼ì„¸ìš”", 
            NAVER_ID: "ì—¬ê¸°ì—_ë„¤ì´ë²„_CLIENT_IDë¥¼_ë„£ìœ¼ì„¸ìš”",
            NAVER_SECRET: "ì—¬ê¸°ì—_ë„¤ì´ë²„_CLIENT_SECRETì„_ë„£ìœ¼ì„¸ìš”",
            YOUTUBE_KEY: "ì—¬ê¸°ì—_ìœ íŠœë¸Œ_API_í‚¤ë¥¼_ë„£ìœ¼ì„¸ìš”"
        };

        // --- ë°ì´í„° í™•ì¥ ë¦¬ìŠ¤íŠ¸ ---
        const KEYWORD_EXPANSION = {
            "í”¼ë¶€ê³¼": ["í”¼ë¶€ê³¼", "í”¼ë¶€ê³¼ì¶”ì²œ", "í”¼ë¶€ê³¼ì „ë¬¸ì˜", "ì•¼ê°„ì§„ë£Œ"],
            "ì„±í˜•ì™¸ê³¼": ["ì„±í˜•ì™¸ê³¼", "ëˆˆì„±í˜•", "ì½”ì„±í˜•", "ì¬ìˆ˜ìˆ "],
            "ë¦¬í”„íŒ…": ["ë¦¬í”„íŒ…", "ìš¸ì„ë¼", "ì¨ë§ˆì§€", "ì¸ëª¨ë“œ", "ìŠˆë§í¬", "ì˜¬ë¦¬ì§€ì˜¤", "í…ì¨ë§ˆ", "í‹°íƒ€ëŠ„"],
            "ìŠ¤í‚¨ë¶€ìŠ¤í„°": ["ìŠ¤í‚¨ë¶€ìŠ¤í„°", "ë¦¬ì¥¬ë€", "ì¥¬ë² ë£©", "ì—‘ì†Œì¢€", "ìŠ¤í‚¨ë°”ì´ë¸Œ"],
            "ì—¬ë“œë¦„": ["ì—¬ë“œë¦„", "ì—¬ë“œë¦„í‰í„°", "ì•„ì¿ ì•„í•„", "PDT", "ì••ì¶œ"],
            "ì œëª¨": ["ì œëª¨", "ë ˆì´ì €ì œëª¨", "ì•„í¬ì§€", "ì  í‹€ë§¥ìŠ¤"],
            "ë‹¤ì´ì–´íŠ¸": ["ë‹¤ì´ì–´íŠ¸", "ì§€ë°©ë¶„í•´ì£¼ì‚¬", "ì‚­ì„¼ë‹¤", "ëŒìŠ¤"],
            "íƒˆëª¨": ["íƒˆëª¨", "ëª¨ë°œì´ì‹", "ë‘í”¼ê´€ë¦¬"],
            "í•œì˜ì›": ["í•œì˜ì›", "êµí†µì‚¬ê³ ", "ì¶”ë‚˜ìš”ë²•", "ë‹¤ì´ì–´íŠ¸í•œì•½"],
            "ë·°í‹°": ["ì—ìŠ¤í…Œí‹±", "ê²½ë½", "ìœ¤ê³½ê´€ë¦¬", "ì‹ ë¶€ê´€ë¦¬"]
        };

        // --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---
        const formatNum = (n) => n ? new Intl.NumberFormat('ko-KR', { notation: "compact", maximumFractionDigits: 1 }).format(n) : 0;
        const getDaysAgo = (dateStr) => {
            if(!dateStr) return 999;
            const y = dateStr.length === 8 ? dateStr.substring(0,4) : dateStr.substring(0,4);
            const m = dateStr.length === 8 ? dateStr.substring(4,6) : dateStr.substring(5,7);
            const d = dateStr.length === 8 ? dateStr.substring(6,8) : dateStr.substring(8,10);
            const post = new Date(y, m-1, d);
            const now = new Date();
            return Math.floor((now - post) / (1000 * 60 * 60 * 24));
        };

        // --- ë“±ê¸‰ ì‚°ì • ë¡œì§ (9ë‹¨ê³„) ---
        const getBlogGrade = (rank, days) => {
            if (rank <= 5) return days <= 30 ? "ğŸ‘‘ S+ (ìµœì‹  ìµœì )" : days <= 180 ? "ğŸ† S (ìƒìœ„ ë…¸ì¶œ)" : "ğŸ›¡ï¸ S- (ì•Œë°•ê¸°)";
            if (rank <= 15) return days <= 30 ? "ğŸš€ A+ (ê¸‰ìƒìŠ¹)" : days <= 180 ? "ğŸ¥‡ A (ìš°ìˆ˜)" : "ğŸ’¤ A- (ìœ ì§€)";
            if (rank <= 30) return days <= 90 ? "ğŸ¥ˆ B (ì¤€ìˆ˜)" : "ğŸ¥‰ C (ì¼ë°˜)";
            return "ğŸŒ± C- (ì‹¬í•´)";
        };

        // ==========================================================================================
        // 2. ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
        // ==========================================================================================
        const App = () => {
            const [tab, setTab] = useState('loc');
            
            // --- STATE: ìƒê¶Œ ë¶„ì„ ---
            const [locQ, setLocQ] = useState('');
            const [locData, setLocData] = useState(null);
            const [locLoading, setLocLoading] = useState(false);
            const [kwdResult, setKwdResult] = useState([]);

            // --- STATE: ë¸”ë¡œê·¸ ë¶„ì„ ---
            const [blogInputs, setBlogInputs] = useState({ region: '', category: 'í”¼ë¶€ê³¼' });
            const [blogData, setBlogData] = useState([]);
            const [blogLoading, setBlogLoading] = useState(false);
            const [selKwd, setSelKwd] = useState("ALL (í†µí•© ë¶„ì„)");
            const [periodFilter, setPeriodFilter] = useState("all");

            // --- STATE: ìœ íŠœë¸Œ ---
            const [ytQ, setYtQ] = useState('');
            const [ytData, setYtData] = useState([]);
            const [ytLoading, setYtLoading] = useState(false);

            // --- STATE: ì¸ìŠ¤íƒ€ ---
            const [instaInputs, setInstaInputs] = useState({ region: '', tag: 'í”¼ë¶€ê³¼' });
            const [instaData, setInstaData] = useState([]);
            const [instaLoading, setInstaLoading] = useState(false);

            // --- STATE: ëŒ€ì‹œë³´ë“œ ---
            const [isConnected, setIsConnected] = useState(false);

            // --------------------------------------------------------
            // ê¸°ëŠ¥ 1: ìƒê¶Œ ë¶„ì„ (Kakao REST API)
            // --------------------------------------------------------
            const searchLocation = async () => {
                if(!locQ) return alert("ë³‘ì›ëª…ì„ ì…ë ¥í•˜ì„¸ìš”");
                setLocLoading(true);
                try {
                    const res = await fetch(`https://dapi.kakao.com/v2/local/search/keyword.json?query=${encodeURIComponent(locQ)}&size=1`, {
                        headers: { "Authorization": `KakaoAK ${CONFIG.KAKAO_REST_KEY}` }
                    });
                    const json = await res.json();
                    if(json.documents && json.documents.length > 0) {
                        const target = json.documents[0];
                        setLocData(target);
                        // í‚¤ì›Œë“œ ìë™ ìƒì„± ì‹œë®¬ë ˆì´ì…˜ (API ì—†ì´ ë¡œì§ìœ¼ë¡œ ì²˜ë¦¬)
                        const region = target.address_name.split(' ')[1] || target.address_name.split(' ')[0]; // êµ¬/ì‹œ
                        const dong = target.address_name.split(' ')[2] || '';
                        
                        const generated = [
                            { kwd: `${region} í”¼ë¶€ê³¼`, vol: Math.floor(Math.random()*5000)+1000, score: 90 },
                            { kwd: `${dong} í”¼ë¶€ê³¼`, vol: Math.floor(Math.random()*2000)+500, score: 85 },
                            { kwd: `${region} ì•¼ê°„ì§„ë£Œ`, vol: Math.floor(Math.random()*1000)+300, score: 80 },
                            { kwd: `${dong} ì—¬ë“œë¦„`, vol: Math.floor(Math.random()*800)+200, score: 75 },
                            { kwd: `${region} í”¼ë¶€ê³¼ì¶”ì²œ`, vol: Math.floor(Math.random()*3000)+1000, score: 70 },
                        ];
                        setKwdResult(generated);
                    } else {
                        alert("ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.");
                    }
                } catch(e) { console.error(e); alert("API í˜¸ì¶œ ì‹¤íŒ¨ (CORS í™•ì¸ í•„ìš”)"); }
                setLocLoading(false);
            };

            // --------------------------------------------------------
            // ê¸°ëŠ¥ 2: ë¸”ë¡œê·¸ ë¶„ì„ (Naver Search API)
            // --------------------------------------------------------
            const searchBlog = async () => {
                if(!blogInputs.region) return alert("ì§€ì—­ëª…ì„ ì…ë ¥í•˜ì„¸ìš”");
                setBlogLoading(true);
                setBlogData([]);
                
                const mainKw = `${blogInputs.region} ${blogInputs.category}`;
                const subs = KEYWORD_EXPANSION[blogInputs.category].slice(0, 5).map(s => `${blogInputs.region} ${s}`);
                const targets = [mainKw, ...subs];
                
                let allItems = [];

                try {
                    // ë³‘ë ¬ í˜¸ì¶œ (ì†ë„ í–¥ìƒ)
                    const promises = targets.map(async (kwd) => {
                        const res = await fetch(`https://openapi.naver.com/v1/search/blog.json?query=${encodeURIComponent(kwd)}&display=15&sort=sim`, {
                            headers: { "X-Naver-Client-Id": CONFIG.NAVER_ID, "X-Naver-Client-Secret": CONFIG.NAVER_SECRET }
                        });
                        const json = await res.json();
                        return (json.items || []).map((item, idx) => ({
                            ...item,
                            searchKwd: kwd,
                            rank: idx + 1,
                            daysAgo: getDaysAgo(item.postdate)
                        }));
                    });

                    const results = await Promise.all(promises);
                    results.forEach(r => allItems = [...allItems, ...r]);
                    
                    // ì¤‘ë³µ ì œê±°
                    const unique = allItems.filter((v, i, a) => a.findIndex(t => t.link === v.link) === i);
                    setBlogData(unique);
                    setSelKwd("ALL (í†µí•© ë¶„ì„)");

                } catch(e) { console.error(e); alert("ë„¤ì´ë²„ API í˜¸ì¶œ ì‹¤íŒ¨. CORS í™•ì¥í”„ë¡œê·¸ë¨ì´ ì¼œì ¸ìˆë‚˜ìš”?"); }
                setBlogLoading(false);
            };

            // ë¸”ë¡œê·¸ í•„í„°ë§ ë¡œì§
            const getFilteredBlogs = () => {
                let data = blogData;
                if(selKwd !== "ALL (í†µí•© ë¶„ì„)") data = data.filter(d => d.searchKwd === selKwd);
                
                if(periodFilter === 'recent') data = data.filter(d => d.daysAgo <= 30);
                else if(periodFilter === 'revisit') data = data.filter(d => d.daysAgo > 30 && d.daysAgo <= 90);
                else if(periodFilter === 'long') data = data.filter(d => d.daysAgo > 90 && d.daysAgo <= 180);
                else if(periodFilter === 'old') data = data.filter(d => d.daysAgo > 180);
                
                return data;
            };

            // --------------------------------------------------------
            // ê¸°ëŠ¥ 3: ìœ íŠœë¸Œ ë¶„ì„ (Youtube Data API)
            // --------------------------------------------------------
            const searchYoutube = async () => {
                if(!ytQ) return alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”");
                setYtLoading(true);
                try {
                    const searchRes = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(ytQ)}&type=video&maxResults=15&key=${CONFIG.YOUTUBE_KEY}`);
                    const searchJson = await searchRes.json();
                    
                    if(!searchJson.items) throw new Error("No items");

                    const ids = searchJson.items.map(i => i.id.videoId).join(',');
                    const statRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${ids}&key=${CONFIG.YOUTUBE_KEY}`);
                    const statJson = await statRes.json();
                    
                    const statMap = {};
                    if(statJson.items) statJson.items.forEach(i => statMap[i.id] = i.statistics);

                    const finalData = searchJson.items.map(item => {
                        const stat = statMap[item.id.videoId] || {};
                        const views = parseInt(stat.viewCount || 0);
                        // êµ¬ë…ììˆ˜ëŠ” API ì¶”ê°€ í˜¸ì¶œì´ í•„ìš”í•˜ë¯€ë¡œ ì—¬ê¸°ì„  ì‹œë®¬ë ˆì´ì…˜ (ì¡°íšŒìˆ˜ì˜ 10~50% ëœë¤)
                        const mockSubs = Math.floor(views * (Math.random() * 0.4 + 0.1)) || 100;
                        const vp = ((views / mockSubs) * 100).toFixed(1);
                        
                        return {
                            id: item.id.videoId,
                            title: item.snippet.title,
                            channel: item.snippet.channelTitle,
                            thumb: item.snippet.thumbnails.medium.url,
                            views: views,
                            subs: mockSubs,
                            vp: vp,
                            date: item.snippet.publishedAt.substring(0, 10)
                        };
                    });
                    setYtData(finalData);

                } catch(e) { console.error(e); alert("ìœ íŠœë¸Œ API í˜¸ì¶œ ì‹¤íŒ¨."); }
                setYtLoading(false);
            };

            // --------------------------------------------------------
            // ê¸°ëŠ¥ 4: ì¸ìŠ¤íƒ€ (Naver Search ìš°íšŒ)
            // --------------------------------------------------------
            const searchInsta = async () => {
                if(!instaInputs.region) return alert("ì§€ì—­ì„ ì…ë ¥í•˜ì„¸ìš”");
                setInstaLoading(true);
                const q = `site:instagram.com "${instaInputs.region} ${instaInputs.tag}"`;
                try {
                    const res = await fetch(`https://openapi.naver.com/v1/search/webkr.json?query=${encodeURIComponent(q)}&display=20`, {
                        headers: { "X-Naver-Client-Id": CONFIG.NAVER_ID, "X-Naver-Client-Secret": CONFIG.NAVER_SECRET }
                    });
                    const json = await res.json();
                    if(json.items) {
                        const clean = json.items.filter(i => i.link.includes('instagram.com')).map(i => ({
                            title: i.title.replace(/<[^>]*>?/g, ''),
                            desc: i.description.replace(/<[^>]*>?/g, ''),
                            link: i.link
                        }));
                        setInstaData(clean);
                    }
                } catch(e) { alert("API Error"); }
                setInstaLoading(false);
            };

            // --------------------------------------------------------
            // [UI] ë Œë”ë§
            // --------------------------------------------------------
            return (
                <div className="max-w-6xl mx-auto p-4 pb-20">
                    <div className="mb-8 mt-4">
                        <h1 className="text-3xl font-bold text-blue-400 tracking-tight">HOSPITAL MARKETING PRO</h1>
                        <p className="text-gray-400 mt-1">Data-Driven Intelligence Dashboard (Personal Edition)</p>
                    </div>

                    {/* TABS */}
                    <div className="flex bg-[#0E1117] border-b border-gray-700 mb-6 sticky top-0 z-50">
                        {['ìƒê¶Œ ë¶„ì„', 'ë¸”ë¡œê·¸ ë¶„ì„', 'ìœ íŠœë¸Œ ë¶„ì„', 'ì¸ìŠ¤íƒ€ ë¶„ì„', 'ë‚´ ì±„ë„ ë¶„ì„'].map((t, i) => {
                            const k = ['loc','blog','yt','insta','dash'][i];
                            return <div key={k} onClick={()=>setTab(k)} className={`tab-btn ${tab===k?'active':''}`}>{t}</div>
                        })}
                    </div>

                    {/* CONTENT 1: ìƒê¶Œ ë¶„ì„ */}
                    {tab === 'loc' && (
                        <div className="card">
                            <div className="flex gap-2 mb-6 items-end">
                                <div className="flex-1">
                                    <label className="block text-gray-400 text-sm mb-1">ë³‘ì›ëª… ê²€ìƒ‰</label>
                                    <input className="input-dark" value={locQ} onChange={e=>setLocQ(e.target.value)} placeholder="ì˜ˆ: ê°•ë‚¨ 00ì˜ì›" onKeyDown={e=>e.key==='Enter' && searchLocation()} />
                                </div>
                                <div className="w-32">
                                    <button onClick={searchLocation} className="btn-primary">{locLoading ? <span className="spinner"></span> : 'ë³‘ì› ì°¾ê¸°'}</button>
                                </div>
                            </div>

                            {locData && (
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div className="bg-[#0D1117] p-4 rounded border border-[#30363D]">
                                        <h3 className="text-xl font-bold text-white mb-2">{locData.place_name}</h3>
                                        <p className="text-gray-400 mb-4">{locData.address_name} ({locData.category_name})</p>
                                        <div className="premium-box">
                                            <h4 className="font-bold text-blue-400 mb-2">ğŸ’¡ AI ë§ˆì¼€íŒ… ì „ëµ ë¦¬í¬íŠ¸</h4>
                                            <p className="text-gray-300 text-sm leading-relaxed">
                                                í˜„ì¬ <b>{locData.address_name.split(' ')[1]}</b> ìƒê¶Œì€ ê²½ìŸì´ ì¹˜ì—´í•©ë‹ˆë‹¤.<br/>
                                                ë‹¨ìˆœ í‚¤ì›Œë“œë³´ë‹¤ëŠ” <b>'ì•¼ê°„ì§„ë£Œ', 'í†µì¦', 'ê°€ê²©'</b> ë“± ì„¸ë¶€ ë‹ˆì¦ˆë¥¼ ê³µëµí•´ì•¼ í•©ë‹ˆë‹¤.
                                            </p>
                                        </div>
                                        <a href={locData.place_url} target="_blank" className="text-blue-400 text-sm hover:underline">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸° â†’</a>
                                    </div>
                                    <div>
                                        <h4 className="font-bold text-white mb-3">ğŸ¯ ì¶”ì²œ í‚¤ì›Œë“œ (Extraction)</h4>
                                        <div className="overflow-hidden rounded border border-[#30363D]">
                                            <table className="w-full text-left">
                                                <thead className="bg-[#1F242C] text-gray-400 text-xs">
                                                    <tr><th className="p-3">í‚¤ì›Œë“œ</th><th className="p-3">ì›”ê°„ ì¡°íšŒìˆ˜</th><th className="p-3">ì¶”ì²œ ì ìˆ˜</th></tr>
                                                </thead>
                                                <tbody className="text-gray-300 text-sm">
                                                    {kwdResult.map((k, i) => (
                                                        <tr key={i} className="border-b border-[#30363D] hover:bg-[#161B22]">
                                                            <td className="p-3">{k.kwd}</td>
                                                            <td className="p-3">{formatNum(k.vol)}</td>
                                                            <td className="p-3 text-blue-400 font-bold">{k.score}</td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* CONTENT 2: ë¸”ë¡œê·¸ ë¶„ì„ */}
                    {tab === 'blog' && (
                        <div className="card">
                            <div className="premium-box mb-6">
                                <h4 className="font-bold text-lg mb-1">ğŸ’¡ Insight</h4>
                                <p className="text-sm text-gray-300">ì„¸ë¶€ ì‹œìˆ ëª…(ex. ìš¸ì„ë¼, ì¸ëª¨ë“œ)ê¹Œì§€ í™•ì¥ ê²€ìƒ‰í•˜ì—¬ <b>ìˆ¨ê²¨ì§„ ìƒìœ„ ë…¸ì¶œ ë¸”ë¡œê±°</b>ë¥¼ ì°¾ì•„ëƒ…ë‹ˆë‹¤.</p>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-2 mb-6 items-end">
                                <div><label className="text-xs text-gray-500">ì§€ì—­</label><input className="input-dark" value={blogInputs.region} onChange={e=>setBlogInputs({...blogInputs, region:e.target.value})} placeholder="ì˜ˆ: ë¶„ë‹¹" /></div>
                                <div>
                                    <label className="text-xs text-gray-500">ì¹´í…Œê³ ë¦¬</label>
                                    <select className="input-dark" value={blogInputs.category} onChange={e=>setBlogInputs({...blogInputs, category:e.target.value})}>
                                        {Object.keys(KEYWORD_EXPANSION).map(k=><option key={k} value={k}>{k}</option>)}
                                    </select>
                                </div>
                                <button onClick={searchBlog} className="btn-primary">{blogLoading ? <span className="spinner"></span> : 'ğŸ“Š í†µí•© ë¶„ì„ ì‹œì‘'}</button>
                            </div>

                            {blogData.length > 0 && (
                                <div>
                                    <div className="mb-4">
                                        <h5 className="text-gray-400 text-sm font-bold mb-2">ğŸ“‚ í‚¤ì›Œë“œë³„ í•„í„°ë§</h5>
                                        <div className="grid grid-cols-2 md:grid-cols-5 gap-2">
                                            <button onClick={()=>setSelKwd("ALL (í†µí•© ë¶„ì„)")} className={`grid-btn ${selKwd==="ALL (í†µí•© ë¶„ì„)"?'active':''}`}>ALL (í†µí•© ë¶„ì„)</button>
                                            {[...new Set(blogData.map(d=>d.searchKwd))].map(k => (
                                                <button key={k} onClick={()=>setSelKwd(k)} className={`grid-btn ${selKwd===k?'active':''}`}>{k}</button>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    <div className="flex flex-wrap gap-4 mb-4 p-3 bg-[#0D1117] rounded border border-[#30363D] items-center">
                                        <span className="text-gray-400 text-xs font-bold">â³ ê¸°ê°„:</span>
                                        {[{v:'all',l:'ì „ì²´'}, {v:'recent',l:'ğŸ”´ ìµœì‹ ê¸€'}, {v:'revisit',l:'ì¬ë°©ë¬¸íƒ€ê²Ÿ'}, {v:'long',l:'ì¥ê¸°íƒ€ê²Ÿ'}].map(f => (
                                            <label key={f.v} className="flex items-center gap-1 cursor-pointer">
                                                <input type="radio" name="pf" checked={periodFilter===f.v} onChange={()=>setPeriodFilter(f.v)} />
                                                <span className={`text-sm ${periodFilter===f.v?'text-white font-bold':'text-gray-500'}`}>{f.l}</span>
                                            </label>
                                        ))}
                                    </div>

                                    <div className="overflow-x-auto">
                                        <table className="w-full text-left">
                                            <thead className="bg-[#1F242C] text-gray-400 text-xs">
                                                <tr>
                                                    <th className="p-3">Rank</th><th className="p-3">ë“±ê¸‰</th><th className="p-3">Type</th>
                                                    <th className="p-3">ë¸”ë¡œê·¸ëª…</th><th className="p-3">ì œëª©</th><th className="p-3">ì‘ì„±ì¼</th><th className="p-3">ë§í¬</th>
                                                </tr>
                                            </thead>
                                            <tbody className="text-gray-300 text-sm">
                                                {getFilteredBlogs().map((item, i) => (
                                                    <tr key={i} className="border-b border-[#30363D] hover:bg-[#161B22]">
                                                        <td className="p-3 font-bold text-white">{item.rank}</td>
                                                        <td className="p-3">
                                                            <span className={item.blog_tier && item.blog_tier.includes('S') ? 'badge-s' : item.blog_tier && item.blog_tier.includes('A') ? 'badge-a' : 'badge-c'}>
                                                                {getBlogGrade(item.rank, item.daysAgo)}
                                                            </span>
                                                        </td>
                                                        <td className="p-3 text-xs text-gray-500">{item.bloggername.includes('ê³µì‹') ? 'ğŸ¥ ë³‘ì›ê³µì‹' : 'ğŸ‘¤ ì¼ë°˜'}</td>
                                                        <td className="p-3 truncate max-w-[100px] text-gray-400">{item.bloggername}</td>
                                                        <td className="p-3 truncate max-w-[200px] text-white">{item.title.replace(/<[^>]+>/g, '')}</td>
                                                        <td className="p-3 text-xs text-gray-500">{item.postdate} ({item.daysAgo}ì¼ì „)</td>
                                                        <td className="p-3"><a href={item.link} target="_blank" className="text-blue-400">ë³´ê¸°</a></td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                        {getFilteredBlogs().length === 0 && <div className="p-10 text-center text-gray-500">ì¡°ê±´ì— ë§ëŠ” ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>}
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* CONTENT 3: ìœ íŠœë¸Œ */}
                    {tab === 'yt' && (
                        <div className="card">
                            <div className="premium-box mb-6"><p className="text-sm text-gray-300"><b>ê¸°ì—¬ë„(VP)</b>ê°€ 100%ë¥¼ ë„˜ëŠ” ì˜ìƒì€ 'êµ¬ë…ì ìˆ˜ë³´ë‹¤ ì¡°íšŒìˆ˜ê°€ ë” ì˜ ë‚˜ì˜¨' ëŒ€ë°• ì†Œì¬ì…ë‹ˆë‹¤.</p></div>
                            <div className="flex gap-2 mb-6">
                                <input className="input-dark" value={ytQ} onChange={e=>setYtQ(e.target.value)} placeholder="ì˜ˆ: í”¼ë¶€ê³¼ ë¸Œì´ë¡œê·¸" onKeyDown={e=>e.key==='Enter' && searchYoutube()} />
                                <button onClick={searchYoutube} className="btn-primary w-32">{ytLoading ? <span className="spinner"></span> : 'ê²€ìƒ‰'}</button>
                            </div>
                            
                            {ytData.length > 0 && (
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    {ytData.map((v, i) => (
                                        <div key={i} className="bg-[#0D1117] rounded border border-[#30363D] overflow-hidden hover:border-gray-500 transition">
                                            <a href={v.link} target="_blank">
                                                <img src={v.thumb} className="w-full h-40 object-cover" />
                                                <div className="p-4">
                                                    <h5 className="text-white font-bold text-sm mb-1 truncate">{v.title}</h5>
                                                    <p className="text-xs text-gray-400 mb-3">{v.channel} â€¢ {v.date}</p>
                                                    <div className="flex justify-between items-center text-xs">
                                                        <span className="text-gray-300">ğŸ‘ï¸ {v.views}</span>
                                                        <span className={`font-bold ${v.VP_raw >= 100 ? 'text-red-400' : 'text-green-400'}`}>VP: {v.vp}%</span>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}

                    {/* CONTENT 4: ì¸ìŠ¤íƒ€ */}
                    {tab === 'insta' && (
                        <div className="card">
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-2 mb-6">
                                <input className="input-dark" value={instaInputs.region} onChange={e=>setInstaInputs({...instaInputs, region:e.target.value})} placeholder="ì§€ì—­ (ì˜ˆ: ê°•ë‚¨)" />
                                <select className="input-dark" value={instaInputs.tag} onChange={e=>setInstaInputs({...instaInputs, tag:e.target.value})}>
                                    <option value="í”¼ë¶€ê³¼">í”¼ë¶€ê³¼</option><option value="ë¦¬í”„íŒ…">ë¦¬í”„íŒ…</option><option value="í•„ëŸ¬">í•„ëŸ¬</option>
                                </select>
                                <button onClick={searchInsta} className="btn-primary">{instaLoading ? <span className="spinner"></span> : 'íƒìƒ‰'}</button>
                            </div>
                            {instaData.map((item, i) => (
                                <div key={i} className="border-b border-[#30363D] py-3">
                                    <a href={item.link} target="_blank" className="font-bold text-white hover:text-blue-400">{item.title.replace(/<[^>]+>/g, '')}</a>
                                    <p className="text-xs text-gray-500 mt-1 truncate">{item.desc.replace(/<[^>]+>/g, '')}</p>
                                </div>
                            ))}
                        </div>
                    )}

                    {/* CONTENT 5: ëŒ€ì‹œë³´ë“œ */}
                    {tab === 'dash' && (
                        <div className="card">
                            {!isConnected ? (
                                <div className="text-center py-20">
                                    <h3 className="text-2xl font-bold text-white mb-4">ë‚´ SNS ì„±ê³¼ë¥¼ í•œëˆˆì—</h3>
                                    <p className="text-gray-400 mb-8">ê³„ì •ì„ ì—°ë™í•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ ì„±ê³¼ë¥¼ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤.</p>
                                    <button onClick={()=>{alert("ì—°ë™ ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!"); setIsConnected(true);}} className="btn-primary max-w-sm mx-auto block">ğŸ”— ê³„ì • ì—°ë™í•˜ê¸° (Simulation)</button>
                                </div>
                            ) : (
                                <div>
                                    <div className="flex justify-between items-center mb-6">
                                        <h3 className="text-xl font-bold text-white">ğŸ“Š 2ì›” ì„±ê³¼ ë¦¬í¬íŠ¸</h3>
                                        <button className="text-sm text-gray-400 hover:text-white">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                                    </div>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                                        {[{l:'ë…¸ì¶œìˆ˜',v:'42.5K',c:'+12%'}, {l:'ì¢‹ì•„ìš”',v:'1,240',c:'+5%'}, {l:'ëŒ“ê¸€',v:'85',c:'-2%'}, {l:'ì €ì¥',v:'320',c:'+8%'}].map((k,i)=>(
                                            <div key={i} className="bg-[#0D1117] p-4 rounded border border-[#30363D] text-center">
                                                <p className="text-gray-500 text-xs mb-1">{k.l}</p>
                                                <h4 className="text-2xl font-bold text-white">{k.v}</h4>
                                                <span className={`text-xs ${k.c.includes('+')?'text-green-400':'text-red-400'}`}>{k.c}</span>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="premium-box">
                                        <h4 className="font-bold mb-2">ğŸ¤– AI ì¸ì‚¬ì´íŠ¸</h4>
                                        <p className="text-sm text-gray-300">ì§€ë‚œì£¼ ëŒ€ë¹„ <b>ì €ì¥ ìˆ˜</b>ê°€ ê¸‰ì¦í–ˆìŠµë‹ˆë‹¤. 'ê°€ê²© ì •ë³´'ê°€ í¬í•¨ëœ ì¹´ë“œë‰´ìŠ¤ê°€ ìœ ì €ë“¤ì—ê²Œ ë°˜ì‘ì´ ì¢‹ìŠµë‹ˆë‹¤. ë‹¤ìŒ ì£¼ì—ë„ ì •ë³´ì„± ì½˜í…ì¸  ë¹„ì¤‘ì„ ëŠ˜ë ¤ë³´ì„¸ìš”.</p>
                                    </div>
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
